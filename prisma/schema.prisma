// GENERATOR & DATASOURCE
generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

// ENUMS
enum Mood {
  happy
  sad
  tired
  angry
}

// MODELS
// USERS TABLE
model User {
  user_id              Int             @id @default(autoincrement())
  username             String          @unique
  password             String
  name                 String
  birthdate            DateTime?
  default_sound_duration Int?
  reminder_time        String?
  gender               String?
  created_at           DateTime        @default(now())

  // Relations
  journal_entries      JournalEntry[]
  sleep_sessions       SleepSession[]
}


// JOURNAL ENTRY TABLE
model JournalEntry {
  journal_id Int      @id @default(autoincrement())
  user_id    Int
  content    String
  mood       Mood     // ENUM as required
  created_at DateTime @default(now())

  // Relation
  user User @relation(fields: [user_id], references: [user_id])
}


// SLEEP SESSION TABLE
model SleepSession {
  session_id      Int       @id @default(autoincrement())
  user_id         Int
  start_time      DateTime
  end_time        DateTime?
  duration_minutes Int?
  sleep_quality    Int?
  created_at      DateTime  @default(now())

  // Relation
  user User @relation(fields: [user_id], references: [user_id])
}


// SOUND TABLE
model Sound {
  sound_id  Int      @id @default(autoincrement())
  title     String
  category  String   @default("About to sleep")
  duration  Int?
  file_path String
  created_at DateTime @default(now())
}